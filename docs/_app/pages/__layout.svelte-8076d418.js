var s=Object.defineProperty,t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,a=(t,e,r)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,o=(s,o)=>{for(var n in o||(o={}))e.call(o,n)&&a(s,n,o[n]);if(t)for(var n of t(o))r.call(o,n)&&a(s,n,o[n]);return s};import{S as n,i as l,s as h,e as i,t as c,k as u,c as f,a as d,g as p,d as b,n as m,b as v,f as g,D as $,E as j,h as w,F as k,G as x,j as E,m as J,o as y,H as I,I as O,J as D,x as P,u as S,v as V}from"../chunks/vendor-e3c26de6.js";import{t as A}from"../chunks/timestamp-916f1093.js";function q(s){let t,e,r,a,o,n,l,h,w;return{c(){t=i("div"),e=i("a"),r=c("home"),a=u(),o=i("a"),n=c("page"),l=u(),h=i("a"),w=c("beat"),this.h()},l(s){t=f(s,"DIV",{class:!0});var i=d(t);e=f(i,"A",{href:!0,class:!0});var c=d(e);r=p(c,"home"),c.forEach(b),a=m(i),o=f(i,"A",{href:!0,class:!0});var u=d(o);n=p(u,"page"),u.forEach(b),l=m(i),h=f(i,"A",{href:!0,class:!0});var v=d(h);w=p(v,"beat"),v.forEach(b),i.forEach(b),this.h()},h(){v(e,"href","/"),v(e,"class","svelte-xpt94p"),v(o,"href","/page"),v(o,"class","svelte-xpt94p"),v(h,"href","/beat"),v(h,"class","svelte-xpt94p"),v(t,"class","nav svelte-xpt94p")},m(s,i){g(s,t,i),$(t,e),$(e,r),$(t,a),$(t,o),$(o,n),$(t,l),$(t,h),$(h,w)},p:j,i:j,o:j,d(s){s&&b(t)}}}class z extends n{constructor(s){super(),l(this,s,null,q,h,{})}}function C(s){let t,e,r,a;return{c(){t=i("div"),e=c("© 1630549920 - "),r=c(s[0]),a=c(" Stefan"),this.h()},l(o){t=f(o,"DIV",{class:!0});var n=d(t);e=p(n,"© 1630549920 - "),r=p(n,s[0]),a=p(n," Stefan"),n.forEach(b),this.h()},h(){v(t,"class","footer svelte-g5euym")},m(s,o){g(s,t,o),$(t,e),$(t,r),$(t,a)},p(s,[t]){1&t&&w(r,s[0])},i:j,o:j,d(s){s&&b(t)}}}function F(s,t,e){let r;return k(s,A,(s=>e(0,r=s))),[r]}class G extends n{constructor(s){super(),l(this,s,F,C,h,{})}}class H{constructor(s){this.workers=[],s.forEach((s=>{this.workers.push(new M(s))}))}run(s){return new Promise(((t,e)=>{this.addJob(s,(s=>t(s.data)))}))}addJob(s,t){let e=[...this.workers].sort(((s,t)=>s.jobs.length-t.jobs.length));console.log(`worker load: ${this.workers.map((s=>s.statusChar())).join("")}`),e[0].startJob(s,t)}status(){let s=[];for(let t=0;t<this.workers.length;t++)s.push(o({id:t},this.workers[t].status()));return{workers:s}}}class M{constructor(s){this.jobId=0,this.jobs=[],this.worker=s,this.worker.onmessage=this.endJob.bind(this),this.handlers={}}endJob(s){let t=s.data.id;this.handlers[t](s),this.removeJob(t),delete this.handlers[t]}removeJob(s){var t=this.jobs.indexOf(s);-1!==t&&this.jobs.splice(t,1)}startJob(s,t){let e=this.jobId++;this.jobs.push(e),this.handlers[e]=t,this.worker.postMessage(o({id:e},s))}status(){return{numJobs:this.jobs.length}}statusChar(){return 0==this.jobs.length?"▁":1==this.jobs.length?"▃":2==this.jobs.length?"▅":this.jobs.length>=5?"▓":this.jobs.length>=3?"▒":void 0}}function W(s){let t,e,r,a,o,n,l;e=new z({});const h=s[1].default,c=x(h,s,s[0],null);return n=new G({}),{c(){t=i("div"),E(e.$$.fragment),r=u(),a=i("div"),c&&c.c(),o=u(),E(n.$$.fragment),this.h()},l(s){t=f(s,"DIV",{id:!0,class:!0});var l=d(t);J(e.$$.fragment,l),r=m(l),a=f(l,"DIV",{id:!0,class:!0});var h=d(a);c&&c.l(h),h.forEach(b),o=m(l),J(n.$$.fragment,l),l.forEach(b),this.h()},h(){v(a,"id","site-content"),v(a,"class","svelte-oqmsbr"),v(t,"id","site"),v(t,"class","svelte-oqmsbr")},m(s,h){g(s,t,h),y(e,t,null),$(t,r),$(t,a),c&&c.m(a,null),$(t,o),y(n,t,null),l=!0},p(s,[t]){c&&c.p&&(!l||1&t)&&I(c,h,s,s[0],l?D(h,s[0],t,null):O(s[0]),null)},i(s){l||(P(e.$$.fragment,s),P(c,s),P(n.$$.fragment,s),l=!0)},o(s){S(e.$$.fragment,s),S(c,s),S(n.$$.fragment,s),l=!1},d(s){s&&b(t),V(e),c&&c.d(s),V(n)}}}function B(s,t,e){let{$$slots:r={},$$scope:a}=t;{let s=4,t=[];for(let e=0;e<s;e++)t.push(new Worker("/workers/factorization.js"));window.factorizer=new H(t)}return s.$$set=s=>{"$$scope"in s&&e(0,a=s.$$scope)},[a,r]}class K extends n{constructor(s){super(),l(this,s,B,W,h,{})}}export{K as default};
